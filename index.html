<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flags Quiz</title>
    <link rel="icon" type="image/svg+xml" href="https://flagcdn.com/fi.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #6b7280 0%, #374151 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            padding: 25px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #718096;
            font-size: 1rem;
            margin-bottom: 25px;
            font-weight: 400;
        }

        .game-section {
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .flags-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .flag-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .flag-section h2 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .current-section {
            text-align: center;
        }

        .previous-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .country-input {
            width: 100%;
            max-width: 350px;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
            margin-bottom: 15px;
        }

        .country-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .country-input::placeholder {
            color: #a0aec0;
        }

        .check-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            margin-bottom: 25px;
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }

        .check-button:active {
            transform: translateY(0);
        }

        .flag-container {
            margin-bottom: 15px;
        }

        .current-flag {
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 300px;
            height: 160px;
            object-fit: cover;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .current-flag:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .previous-flag {
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 300px;
            height: 160px;
            object-fit: cover;
            border: 2px solid #e2e8f0;
        }

        .placeholder-flag {
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 300px;
            height: 160px;
            border: 2px solid #e2e8f0;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            font-style: italic;
            text-align: center;
            line-height: 1.4;
        }

        .placeholder-info {
            height: 200px;
            background: #f1f5f9;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            font-style: italic;
            text-align: center;
            line-height: 1.4;
        }

        .score {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            background: #f7fafc;
            padding: 12px 25px;
            border-radius: 10px;
            display: inline-block;
            border: 2px solid #e2e8f0;
        }

        .result-indicator {
            font-size: 1.5rem;
            font-weight: 600;
            padding: 12px 25px;
            border-radius: 10px;
            display: inline-block;
            border: 2px solid;
            margin-top: 10px;
        }

        .result-correct {
            color: #059669;
            background: #ecfdf5;
            border-color: #10b981;
        }

        .result-incorrect {
            color: #dc2626;
            background: #fef2f2;
            border-color: #ef4444;
        }

        .info-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .info-section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            text-align: center;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            text-align: left;
        }

        .info-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .info-label {
            font-weight: 600;
            color: #3b82f6;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .info-value {
            color: #2d3748;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .footer {
            margin-top: 25px;
            padding-top: 12px;
            border-top: 2px solid #e2e8f0;
            color: #718096;
            font-size: 0.8rem;
            font-style: italic;
        }

        .footer a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: 500;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .footnote {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #f3f4f6;
            color: #9ca3af;
            font-style: italic;
        }

        .footnote small {
            font-size: 0.75rem;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 12px;
                margin: 10px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 0.9rem;
                margin-bottom: 25px;
            }

            .flags-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .current-flag {
                height: 160px;
            }

            .previous-flag,
            .placeholder-flag {
                height: 140px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px 10px;
            }

            h1 {
                font-size: 1.6rem;
            }

            .subtitle {
                font-size: 0.85rem;
                margin-bottom: 20px;
            }

            .flags-container {
                gap: 12px;
            }

            .check-button {
                padding: 10px 25px;
                font-size: 0.9rem;
            }

            .current-flag {
                height: 140px;
            }

            .previous-flag,
            .placeholder-flag {
                height: 120px;
            }

            .info-grid {
                gap: 8px;
            }

            .info-item {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Flags Quiz</h1>
        <p class="subtitle">Test your knowledge of world flags and learn about countries</p>

        <div class="game-section">
            <div class="input-group">
                <input id="country" class="country-input" type="text" placeholder="Enter country name..." autocomplete="off" autofocus>
                <br>
                <button id="button" class="check-button" onclick="process();">Check Answer</button>
            </div>

            <div class="flags-container">
                <div class="flag-section">
                    <h2>Current Flag</h2>
                    <div class="flag-container">
                        <img id="flag" class="current-flag" src="" alt="Current flag">
                    </div>
                    <div class="score" id="score">Score: 0 of 0</div>
                </div>

                <div class="flag-section">
                    <h2>Previous Flag</h2>
                    <div id="previousFlagContainer">
                        <div class="placeholder-flag" id="placeholderFlag">
                            No previous flag yet.<br>
                            Submit your first answer to see details here.
                        </div>
                        <img id="prevFlag" class="previous-flag hidden" src="" alt="Previous flag">
                    </div>
                    <div id="resultIndicator" class="result-indicator hidden"></div>
                </div>
            </div>

            <div class="info-section" id="infoSection">
                <h3>Previous Flag Information</h3>
                <div id="infoPlaceholder" class="placeholder-info">
                    No previous flag information yet.<br>
                    Submit your first answer to see details here.
                </div>
                <div class="info-grid hidden" id="infoGrid">
                    <div class="info-item">
                        <div class="info-label">Country</div>
                        <div class="info-value" id="prevCountry">&nbsp;</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Capital</div>
                        <div class="info-value" id="capital">&nbsp;</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Continent</div>
                        <div class="info-value" id="continent">&nbsp;</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Government</div>
                        <div class="info-value" id="government">&nbsp;</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Languages</div>
                        <div class="info-value" id="language">&nbsp;</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            Code by Jan Schupke (<a href="mailto:jan@schupke.io">jan@schupke.io</a>), images taken from <a href="http://www.flagpictures.org/">www.flagpictures.org</a>, 2014.
            <div class="footnote">
                <small>Note: Some flags or information provided may not be fully accurate or up-to-date.</small>
            </div>
        </div>
    </div>

<script type="text/javascript">
<!--

// Mapping from local image keys to ISO 3166-1 alpha-2 codes for Flagcdn.com
const flagCdnIsoCodes = {
  afghanistan: 'af',
  albania: 'al',
  algeria: 'dz',
  angola: 'ao',
  argentina: 'ar',
  armenia: 'am',
  australia: 'au',
  austria: 'at',
  azerbaijan: 'az',
  bahamas: 'bs',
  bahrain: 'bh',
  belgium: 'be',
  bolivia: 'bo',
  bosnia: 'ba',
  brazil: 'br',
  britain: 'gb', // Great Britain/United Kingdom
  cambodia: 'kh',
  cameron: 'cm', // Cameroon
  canada: 'ca',
  chad: 'td',
  chile: 'cl',
  china: 'cn',
  croatia: 'hr',
  cuba: 'cu',
  czech: 'cz',
  domrep: 'do', // Dominican Republic
  ecuador: 'ec',
  egypt: 'eg',
  emirates: 'ae', // United Arab Emirates
  estonia: 'ee',
  ethiopia: 'et',
  fiji: 'fj',
  finland: 'fi',
  france: 'fr',
  gambia: 'gm',
  germany: 'de',
  ghana: 'gh',
  greece: 'gr',
  greenland: 'gl',
  guinea: 'gn',
  haiti: 'ht',
  hungary: 'hu',
  iceland: 'is',
  india: 'in',
  iraq: 'iq',
  israel: 'il',
  italy: 'it',
  jamaica: 'jm',
  japan: 'jp',
  jordan: 'jo',
  kazakhstan: 'kz',
  kenya: 'ke',
  korea: 'kr', // South Korea
  kuwait: 'kw',
  kyrgyzstan: 'kg',
  latvia: 'lv',
  lebanon: 'lb',
  liberia: 'lr',
  libya: 'ly',
  liechtenstein: 'li',
  luxembourg: 'lu',
  macedonia: 'mk', // North Macedonia
  madagascar: 'mg',
  malaysia: 'my',
  mali: 'ml',
  mexico: 'mx',
  micronesia: 'fm',
  mongolia: 'mn',
  morocco: 'ma',
  nepal: 'np',
  netherlands: 'nl',
  norway: 'no',
  peru: 'pe',
  philippines: 'ph',
  poland: 'pl',
  portugal: 'pt',
  qatar: 'qa',
  russia: 'ru',
  saf: 'za', // South Africa
  saudi: 'sa', // Saudi Arabia
  singapore: 'sg',
  slovakia: 'sk',
  somalia: 'so',
  spain: 'es',
  srilanka: 'lk', // Sri Lanka
  sudan: 'sd',
  sweden: 'se',
  switzerland: 'ch',
  taiwan: 'tw',
  tanzania: 'tz',
  tunisia: 'tn',
  uganda: 'ug',
  ukraine: 'ua',
  uruguay: 'uy',
  usa: 'us',
  uzbekistan: 'uz',
  vatican: 'va',
  venezuela: 've',
  vietnam: 'vn',
  zambia: 'zm',
  zealand: 'nz', // New Zealand
  zimbabwe: 'zw',
};

// Helper to get Flagcdn.com URL for a given entry (SVG, fallback to PNG if needed)
function getFlagCdnUrl(entry, format = 'svg') {
  const code = flagCdnIsoCodes[entry.getImage()];
  if (!code) return '';
  if (format === 'svg') {
    return `https://flagcdn.com/${code}.svg`;
  } else if (format === 'png') {
    return `https://flagcdn.com/w320/${code}.png`;
  }
  return '';
}

function Entry(image, country, capital, continent, government, language) {
    this.image = image;
    this.country = country;
    this.capital = capital;
    this.continent = continent;
    this.government = government;
    this.language = language;

    this.getImage = function() {
        return this.image;
    };

    this.getCountry = function() {
        return this.country;
    };

    this.getCapital = function() {
        return this.capital;
    };

    this.getContinent = function() {
        return this.continent;
    };

    this.getGovernment = function() {
        return this.government;
    };

    this.getLanguage = function() {
        return this.language;
    };
}

var entries = [];

entries.push(new Entry("albania", "Albania", "Tirana", "Europe", "Republic", "Albanian"));
entries.push(new Entry("australia", "Australia", "Canberra", "Oceania", "Constitutional monarchy", "English"));
entries.push(new Entry("austria", "Austria", "Vienna", "Europe", "Republic", "German"));
entries.push(new Entry("belgium", "Belgium", "Brussels", "Europe", "Monarchy", "French, German, Dutch"));
entries.push(new Entry("brazil", "Brazil", "Brasília", "South America", "Republic", "Portuguese"));
entries.push(new Entry("britain", "Great Britain", "London", "Europe", "Constitutional monarchy", "English"));
entries.push(new Entry("canada", "Canada", "Ottawa", "North America", "Constitutional monarchy", "English, French"));
entries.push(new Entry("china", "China", "Beijing", "Asia", "Communist state", "Chinese"));
entries.push(new Entry("croatia", "Croatia", "Zagreb", "Europe", "Republic", "Croatian"));
entries.push(new Entry("czech", "Czech Republic", "Prague", "Europe", "Republic", "Czech"));
entries.push(new Entry("egypt", "Egypt", "Cairo", "Africa", "Republic", "Arabic"));
entries.push(new Entry("emirates", "United Arab Emirates", "Abu Dhabi", "Elective monarchy", "Arabic"));
entries.push(new Entry("estonia", "Estonia", "Tallinn", "Europe", "Republic", "Estonian"));
entries.push(new Entry("finland", "Finland", "Helsinki", "Europe", "Republic", "Finnish, Swedish"));
entries.push(new Entry("france", "France", "Paris", "Europe", "Republic", "French"));
entries.push(new Entry("germany", "Germany", "Berlin", "Europe", "Republic", "German"));
entries.push(new Entry("greece", "Greece", "Athens", "Europe", "Republic", "Greek"));
entries.push(new Entry("hungary", "Hungary", "Budapest", "Europe", "Republic", "Hungarian"));
entries.push(new Entry("iceland", "Iceland", "Reykjavik", "Europe", "Republic", "Icelandic"));
entries.push(new Entry("india", "India", "New Delhi", "Asia", "Republic", "Hindi, English"));
entries.push(new Entry("iraq", "Iraq", "Baghdad", "Asia", "Republic", "Arabic, Kurdish"));
entries.push(new Entry("israel", "Israel", "Jerusalem", "Asia", "Republic", "Hebrew, Arabic"));
entries.push(new Entry("italy", "Italy", "Rome", "Europe", "Republic", "Italian"));
entries.push(new Entry("japan", "Japan", "Tokyo", "Asia", "Constitutional monarchy", "Japanese"));
entries.push(new Entry("korea", "South Korea", "Seoul", "Asia", "Republic", "Korean"));
entries.push(new Entry("latvia", "Latvia", "Riga", "Europe", "Republic", "Latvian"));
entries.push(new Entry("macedonia", "North Macedonia", "Skopje", "Europe", "Republic", "Macedonian"));
entries.push(new Entry("mexico", "Mexico", "Mexico City", "North America", "Republic", "Spanish"));
entries.push(new Entry("netherlands", "Netherlands", "Amsterdam", "Europe", "Constitutional monarchy", "Dutch"));
entries.push(new Entry("norway", "Norway", "Oslo", "Europe", "Constitutional monarchy", "Norwegian"));
entries.push(new Entry("philippines", "Philippines", "Manila", "Asia", "Republic", "English, Filipino"));
entries.push(new Entry("poland", "Poland", "Warsaw", "Europe", "Republic", "Polish"));
entries.push(new Entry("portugal", "Portugal", "Lisbon", "Europe", "Republic", "Portuguese"));
entries.push(new Entry("russia", "Russian Federation", "Moscow", "Europe", "Republic", "Russian"));
entries.push(new Entry("saudi", "Saudi Arabia", "Riyadh", "Asia", "Absolute monarchy", "Arabic"));
entries.push(new Entry("singapore", "Singapore", "Singapore", "Asia", "Republic", "English, Malay, Tamil, Mandarin"));
entries.push(new Entry("slovakia", "Slovakia", "Bratislava", "Europe", "Republic", "Slovak"));
entries.push(new Entry("spain", "Spain", "Madrid", "Europe", "Constitutional monarchy", "Spanish"));
entries.push(new Entry("sweden", "Sweden", "Stockholm", "Europe", "Constitutional monarchy", "Swedish"));
entries.push(new Entry("switzerland", "Switzerland", "Bern", "Europe", "Republic", "German, French, Romansh, Italian"));
entries.push(new Entry("taiwan", "Taiwan", "Taipei", "Asia", "Republic", "Mandarin"));
entries.push(new Entry("ukraine", "Ukraine", "Kyiv", "Europe", "Republic", "Ukrainian"));
entries.push(new Entry("usa", "United States of America", "Washington, D.C.", "North America", "Republic", "English"));
entries.push(new Entry("vietnam", "Vietnam", "Hanoi", "Asia", "Communist state", "Vietnamese"));
entries.push(new Entry("zealand", "New Zealand", "Wellington", "Oceania", "Constitutional monarchy", "English"));

entries.push(new Entry("greenland", "Greenland", "Nuuk", "North America", "Autonomous territory", "Greenlandic"));
entries.push(new Entry("cuba", "Cuba", "Havana", "North America", "Socialist republic", "Spanish"));
entries.push(new Entry("bahamas", "Bahamas", "Nassau", "North America", "Constitutional monarchy", "English"));
entries.push(new Entry("haiti", "Haiti", "Port-au-Prince", "North America", "Republic", "French, Haitian Creole"));
entries.push(new Entry("jamaica", "Jamaica", "Kingston", "North America", "Constitutional monarchy", "English"));
entries.push(new Entry("domrep", "Dominican Republic", "Santo Domingo", "North America", "Republic", "Spanish"));
entries.push(new Entry("venezuela", "Venezuela", "Caracas", "South America", "Republic", "Spanish"));
entries.push(new Entry("ecuador", "Ecuador", "Quito", "South America", "Republic", "Spanish"));
entries.push(new Entry("peru", "Peru", "Lima", "South America", "Republic", "Spanish"));
entries.push(new Entry("bolivia", "Bolivia", "La Paz", "South America", "Republic", "Spanish"));
entries.push(new Entry("chile", "Chile", "Santiago", "South America", "Republic", "Spanish"));
entries.push(new Entry("uruguay", "Uruguay", "Montevideo", "South America", "Republic", "Spanish"));
entries.push(new Entry("argentina", "Argentina", "Buenos Aires", "South America", "Republic", "Spanish"));
entries.push(new Entry("kazakhstan", "Kazakhstan", "Nur-Sultan", "Asia", "Presidential republic", "Kazakh, Russian"));
entries.push(new Entry("mongolia", "Mongolia", "Ulaanbaatar", "Asia", "Republic", "Mongolian"));
entries.push(new Entry("nepal", "Nepal", "Kathmandu", "Asia", "Republic", "Nepali"));
entries.push(new Entry("cambodia", "Cambodia", "Phnom Penh", "Asia", "Constitutional monarchy", "Khmer"));
entries.push(new Entry("srilanka", "Sri Lanka", "Colombo", "Asia", "Republic", "Sinhala, Tamil"));
entries.push(new Entry("malaysia", "Malaysia", "Kuala Lumpur", "Asia", "Constitutional monarchy", "Malaysian"));
entries.push(new Entry("fiji", "Fiji", "Suva", "Oceania", "Republic", "English, Fijian"));
entries.push(new Entry("micronesia", "Micronesia", "-", "-", "-", "-"));
entries.push(new Entry("vatican", "Vatican City", "Vatican City", "Europe", "Absolute monarchy, Theocracy", "Italian"));
entries.push(new Entry("bosnia", "Bosnia and Herzegovina", "Sarajevo", "Europe", "Republic", "Bosnian, Serbian, Croatian"));
entries.push(new Entry("luxembourg", "Luxembourg", "Luxembourg", "Europe", "Constitutional monarchy", "French, Luxembourgish, German"));
entries.push(new Entry("liechtenstein", "Liechtenstein", "Vaduz", "Europe", "Constitutional monarchy", "German"));
entries.push(new Entry("lebanon", "Lebanon", "Beirut", "Asia", "Republic", "Arabic"));
entries.push(new Entry("qatar", "Qatar", "Doha", "Asia", "Absolute monarchy", "Arabic"));
entries.push(new Entry("bahrain", "Bahrain", "Manama", "Asia", "Constitutional monarchy", "Arabic"));
entries.push(new Entry("kuwait", "Kuwait", "Kuwait City", "Asia", "Constitutional monarchy", "Arabic"));
entries.push(new Entry("jordan", "Jordan", "Amman", "Asia", "Constitutional monarchy", "Arabic"));
entries.push(new Entry("armenia", "Armenia", "Yerevan", "Asia", "Republic", "Armenian"));
entries.push(new Entry("azerbaijan", "Azerbaijan", "Baku", "Asia", "Republic", "Azerbaijani"));
entries.push(new Entry("afghanistan", "Afghanistan", "Kabul", "Asia", "Islamic republic", "Pashto, Dari"));
entries.push(new Entry("uzbekistan", "Uzbekistan", "Tashkent", "Asia", "Republic", "Uzbek"));
entries.push(new Entry("kyrgyzstan", "Kyrgyzstan", "Bishkek", "Asia", "Republic", "Kyrgyz, Russian"));
entries.push(new Entry("morocco", "Morocco", "Rabat", "Africa", "Constitutional monarchy", "Arabic"));
entries.push(new Entry("libya", "Libya", "Tripoli", "Africa", "Republic", "Arabic"));
entries.push(new Entry("somalia", "Somalia", "Mogadishu", "Africa", "Republic", "Somali, Arabic"));
entries.push(new Entry("saf", "South Africa", "Pretoria", "Africa", "Republic", "English, Afrikaans, Zulu, Xhosa"));

entries.push(new Entry("gambia", "Gambia", "Banjul", "Africa", "Republic", "English"));
entries.push(new Entry("liberia", "Liberia", "Monrovia", "Africa", "Republic", "English"));
entries.push(new Entry("guinea", "Guinea", "Conakry", "Africa", "Republic", "French"));
entries.push(new Entry("ghana", "Ghana", "Accra", "Africa", "Republic", "English"));
entries.push(new Entry("mali", "Mali", "Bamako", "Africa", "Republic", "French"));
entries.push(new Entry("algeria", "Algeria", "Algiers", "Africa", "Presidential republic", "Arabic"));
entries.push(new Entry("tunisia", "Tunisia", "Tunis", "Africa", "Republic", "Arabic"));
entries.push(new Entry("cameron", "Cameroon", "Yaoundé", "Africa", "Republic", "French, English"));
entries.push(new Entry("chad", "Chad", "N'Djamena", "Africa", "Presidential republic", "French, Arabic"));
entries.push(new Entry("sudan", "Sudan", "Khartoum", "Africa", "Republic", "Arabic, English"));
entries.push(new Entry("ethiopia", "Ethiopia", "Addis Ababa", "Africa", "Republic", "Amharic"));
entries.push(new Entry("uganda", "Uganda", "Kampala", "Africa", "Republic", "English, Swahili"));
entries.push(new Entry("kenya", "Kenya", "Nairobi", "Africa", "Republic", "English, Swahili"));
entries.push(new Entry("tanzania", "Tanzania", "Dodoma", "Africa", "Republic", "English, Swahili"));
entries.push(new Entry("angola", "Angola", "Luanda", "Africa", "Republic", "Portuguese"));
entries.push(new Entry("zambia", "Zambia", "Lusaka", "Africa", "Republic", "English"));
entries.push(new Entry("zimbabwe", "Zimbabwe", "Harare", "Africa", "Republic", "English, Shona, Ndebele"));
entries.push(new Entry("madagascar", "Madagascar", "Antananarivo", "Africa", "Republic", "Malagasy, French"));

document.getElementById("country").onkeypress = function(e) {
    var event = e || window.event;
    var charCode = event.which || event.keyCode;

    if ( charCode == '13' ) {
      process();
      document.getElementById("country").value = "";
      document.getElementById("country").focus();
      return false;
    }
}

// Focus on input when page loads
window.onload = function() {
    document.getElementById("country").focus();
}

var total = 0;
var correct = 0;
var currentEntry;
var index = 0;

index = Math.floor(Math.random() * (entries.length))
currentEntry = entries[index];
document.getElementById("flag").src = getFlagCdnUrl(currentEntry);

// Helper function to check if answer contains correct words
function isAnswerCorrect(userAnswer, correctAnswer) {
    // Remove common words and normalize
    var commonWords = ['the', 'of', 'and', 'republic', 'united', 'states', 'kingdom', 'federation'];
    var userWords = userAnswer.toLowerCase().split(/\s+/).filter(word => 
        word.length > 0 && !commonWords.includes(word)
    );
    var correctWords = correctAnswer.toLowerCase().split(/\s+/).filter(word => 
        word.length > 0 && !commonWords.includes(word)
    );
    
    // Check for exact match first
    if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
        return true;
    }
    
    // Check if user answer contains significant words from correct answer
    var significantWords = correctWords.filter(word => word.length > 2);
    if (significantWords.length === 0) {
        significantWords = correctWords; // If no significant words, use all words
    }
    
    // Check if at least 60% of significant words are present
    var matchingWords = significantWords.filter(word => 
        userWords.some(userWord => userWord.includes(word) || word.includes(userWord))
    );
    
    return matchingWords.length >= Math.ceil(significantWords.length * 0.6);
}

function process() {
    total++;
    var userAnswer = document.getElementById("country").value.toLowerCase().trim();
    var correctAnswer = window.currentEntry.getCountry();
    var isCorrect = isAnswerCorrect(userAnswer, correctAnswer);
    
    if(isCorrect) {
        correct++;
        // Visual feedback for correct answer
        document.getElementById("flag").style.borderColor = "#48bb78";
        setTimeout(function() {
            document.getElementById("flag").style.borderColor = "#e2e8f0";
        }, 1000);
    } else {
        // Visual feedback for incorrect answer
        document.getElementById("flag").style.borderColor = "#f56565";
        setTimeout(function() {
            document.getElementById("flag").style.borderColor = "#e2e8f0";
        }, 1000);
    }

    // Show previous flag and info section, update with current flag info
    document.getElementById("placeholderFlag").classList.add("hidden");
    document.getElementById("prevFlag").classList.remove("hidden");
    document.getElementById("prevFlag").src = getFlagCdnUrl(currentEntry);
    document.getElementById("infoPlaceholder").classList.add("hidden");
    document.getElementById("infoGrid").classList.remove("hidden");
    document.getElementById("prevCountry").innerHTML = currentEntry.getCountry();
    document.getElementById("capital").innerHTML = currentEntry.getCapital();
    document.getElementById("continent").innerHTML = currentEntry.getContinent();
    document.getElementById("government").innerHTML = currentEntry.getGovernment();
    document.getElementById("language").innerHTML = currentEntry.getLanguage();

    // Show result indicator
    const resultIndicator = document.getElementById("resultIndicator");
    resultIndicator.classList.remove("hidden");
    resultIndicator.classList.remove("result-correct", "result-incorrect");
    
    if(isCorrect) {
        resultIndicator.classList.add("result-correct");
        resultIndicator.innerHTML = "✓ Correct!";
    } else {
        resultIndicator.classList.add("result-incorrect");
        resultIndicator.innerHTML = "✗ Incorrect";
    }

    index = Math.floor(Math.random() * (entries.length))
    currentEntry = entries[index];

    document.getElementById("flag").src = getFlagCdnUrl(currentEntry);
    document.getElementById("score").innerHTML = "Score: " + correct + " of " + window.total;
}

// -->
</script>

</body>
</html>
